<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantra</title>
    <link rel="shortcut icon" type="image/png" href="../images/home/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Elsie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Elsie&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/style-profile.css">
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="../index.html">
                <img src="../images/home/logo.png" alt="Logo" class="logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" id="navbarTogglerBtn">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center navbar-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="explore.html">Explore</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="classes.html">Classes</a>
                    </li>
                    <li class="nav-item" id="profileNavItem" style="display: none;">
                        <a class="nav-link active" href="#">Profile</a>
                    </li>
                    <li class="nav-item" id="breathNavItem" style="display: none;">
                        <a class="nav-link" href="breath.html">Breath</a>
                    </li>
                    <li class="nav-item" id="logoutNavItem" style="display: none;">
                        <a class="nav-link" href="#" onclick="logout()">Logout</a>
                    </li>
                </ul>
                <button class="btn btn-primary btn-book ms-auto" onclick="window.location.href = '../pages/appointment.html';">Book Now</button>
            </div>
        </div>
    </nav>

    <div class="center-content">
        <h2 class="yoga-head">User Profile</h2>
        <p class="yoga-description">The User Profile feature allows users to personalize their experience, providing a central hub to manage preferences, track activity, and engage with content tailored to their interests. With the User Profile, users can customize settings, view their history, and connect with a community of like-minded individuals, enhancing their overall experience on the platform.</p>
    </div>

    <div class="container-yoga">
        <div class="contain-yoga">
            <div class="row">
                <div class="col-md-6">   
                    <div class="card custom-card-yoga">
                        <div class="card-body">
                            <div id="profileInfo" class="info">
                                <div class="profile-detail">
                                    <strong>Name:</strong> <span id="name"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Surname:</strong> <span id="surname"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Sex:</strong> <span id="sex"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Age:</strong> <span id="age"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Email:</strong> <span id="email"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Role:</strong> <span id="role"></span>
                                </div>
                                <div class="profile-detail">
                                    <strong>Interests:</strong> <span id="interests"></span>
                                </div>
                            </div>
                            <!-- Edit Profile Form -->
                            <form id="editProfileForm" style="display: none;">
                                <div class="form-group">
                                    <label for="editName" class="form-label">Name</label>
                                    <input type="text" class="form-control form-control-sm" id="editName">
                                </div>
                                <div class="form-group">
                                    <label for="editSurname" class="form-label">Surname</label>
                                    <input type="text" class="form-control form-control-sm" id="editSurname">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Sex</label><br>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="editSex" id="male" value="male">
                                        <label class="form-check-label" for="male">Male</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="editSex" id="female" value="female">
                                        <label class="form-check-label" for="female">Female</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="editAge" class="form-label">Age</label>
                                    <input type="number" class="form-control form-control-sm" id="editAge">
                                </div>
                                <div class="form-group">
                                    <label for="editEmail" class="form-label">Email</label>
                                    <input type="email" class="form-control form-control-sm" id="editEmail">
                                </div>
                                <div class="form-group">
                                    <label for="editRole" class="form-label">Role</label>
                                    <select class="form-select form-select-sm" id="editRole">
                                        <option value="student">Student</option>
                                        <option value="officer">Officer</option>
                                        <option value="teacher">Teacher</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="editInterests" class="form-label">Interests</label><br>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="interest1" value="yoga">
                                        <label class="form-check-label" for="yoga-interest">Yoga</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="interest2" value="meditation">
                                        <label class="form-check-label" for="meditation-interest">Meditation</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="interest3" value="relax">
                                        <label class="form-check-label" for="relax-interest">Relax</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="password">Password</label>
                                        <input type="password" class="form-control" id="password" name="password">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary btn-sm">Save Changes</button>
                            </form>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-edit" id="editProfileBtn">Edit Profile</button>
                    <button type="button" class="btn btn-danger btn-delete" id="deleteProfileBtn">Delete Profile</button>
                </div>

                
                <div id="carouselImages2" class="carousel slide custom-carousel" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item yoga active">
                            <img src="../images/explore/prenatal-yoga.jpg" class="prenatal-image" alt="Fourth Image">
                        </div>
                        <div class="carousel-item yoga">
                            <img src="../images/explore/yoga-therapy.jpg" class="therapy" alt="Fifth Image">
                        </div>
                        <div class="carousel-item yoga ">
                            <img src="../images/explore/hatha-yoga.jpg" class="hatha" alt="Sixth Image">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>  

    <div class="footer">
        <div class="footer-logo">
            <img src="../images/home/logo.png" alt="Logo">
        </div>
        <div class="footer-menu">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="explore.html">Explore</a></li>
                <li><a href="classes.html">Classes</a></li>
                <li><a href="registration.html">Sign Up</a></li>
                <li><a href="login.html">Log In</a></li>
            </ul>
        </div>
        <div class="footer-social">
            <a href="https://www.facebook.com/groups/2485699931753569/"><img src="../images/home/facebook.png" alt="Facebook"></a>
            <a href="https://www.instagram.com/yoga/"><img src="../images/home/instagram.png" alt="Instagram"></a>
        </div>
    </div>

    <script>
        const storedData = JSON.parse(localStorage.getItem('formData'));
    
        if (storedData) {
            const profileInfo = document.getElementById('profileInfo');
            const profileHTML = `
                <p><strong>Name:</strong> ${storedData.name}</p>
                <p><strong>Surname:</strong> ${storedData.surname}</p>
                <p><strong>Sex:</strong> ${storedData.sex}</p>
                <p><strong>Age:</strong> ${storedData.age}</p>
                <p><strong>Email:</strong> ${storedData.email}</p>
                <p><strong>Role:</strong> ${storedData.role}</p>
                <p><strong>Interests:</strong> ${storedData.interests.join(', ')}</p>
            `;
            profileInfo.innerHTML = profileHTML;
    
            const profileNavItem = document.getElementById('profileNavItem');
            const breathNavItem = document.getElementById('breathNavItem');
            const logoutNavItem = document.getElementById('logoutNavItem');
            if (profileNavItem && breathNavItem && logoutNavItem) {
                profileNavItem.style.display = 'block';
                breathNavItem.style.display = 'block';
                logoutNavItem.style.display = 'block';
            }
        }
    
        function logout() {
            window.location.href = '../index.html';
        }
    
        document.getElementById('editProfileBtn').addEventListener('click', function() {
            document.getElementById('profileInfo').style.display = 'none';
            document.getElementById('editProfileForm').style.display = 'block';

            document.getElementById('editName').value = storedData.name;
            document.getElementById('editSurname').value = storedData.surname;
            document.getElementById('editAge').value = storedData.age;
            document.getElementById('editEmail').value = storedData.email;
            document.getElementById('editRole').value = storedData.role;
    
            const sexRadioButtons = document.getElementsByName('editSex');
            sexRadioButtons.forEach(btn => {
                if (btn.value === storedData.sex) {
                    btn.checked = true;
                }
            });
    
            const interestsCheckboxes = document.querySelectorAll('[id^="interest"]');
            storedData.interests.forEach(interest => {
                interestsCheckboxes.forEach(checkbox => {
                    if (checkbox.value === interest) {
                        checkbox.checked = true;
                    }
                });
            });
        });
    
        document.getElementById('editProfileForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Update stored data
            storedData.name = document.getElementById('editName').value;
            storedData.surname = document.getElementById('editSurname').value;
            storedData.sex = document.querySelector('input[name="editSex"]:checked').value;
            storedData.age = document.getElementById('editAge').value;
            storedData.email = document.getElementById('editEmail').value;
            storedData.role = document.getElementById('editRole').value;
            storedData.password = document.getElementById('password').value;

            const interestsCheckboxes = document.querySelectorAll('[id^="interest"]');
            storedData.interests = [];
            interestsCheckboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    storedData.interests.push(checkbox.value);
                }
            });

            const profileInfo = document.getElementById('profileInfo');
            profileInfo.innerHTML = `
                <p><strong>Name:</strong> ${storedData.name}</p>
                <p><strong>Surname:</strong> ${storedData.surname}</p>
                <p><strong>Sex:</strong> ${storedData.sex}</p>
                <p><strong>Age:</strong> ${storedData.age}</p>
                <p><strong>Email:</strong> ${storedData.email}</p>
                <p><strong>Role:</strong> ${storedData.role}</p>
                <p><strong>Password:</strong> Updated</p> <!-- Show that password is updated -->
                <p><strong>Interests:</strong> ${storedData.interests.join(', ')}</p>
            `;

            document.getElementById('carouselImages2').style.display = 'block';

            document.getElementById('profileInfo').style.display = 'block';
            document.getElementById('editProfileForm').style.display = 'none';

            localStorage.setItem('formData', JSON.stringify(storedData));
        });

        function deleteProfile() {
            const confirmation = confirm("Are you sure you want to delete your profile? This action cannot be undone.");
            if (confirmation) {
                localStorage.removeItem('formData');
                window.location.href = '../index.html';
            }
        }

        document.getElementById('deleteProfileBtn').addEventListener('click', deleteProfile);
    </script>
    

<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
</html>
